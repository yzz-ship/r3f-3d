(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9630],{1066:(e,t,r)=>{Promise.resolve().then(r.bind(r,3629))},2596:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}},3031:e=>{e.exports={webgl:"page_webgl__pHUr8","loading-bar":"page_loading-bar__OTXhJ",ended:"page_ended__2grDA",point:"page_point__KOqFF",label:"page_label__I7jST",text:"page_text__B8Y_c",visible:"page_visible__VwJV2"}},3629:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g});var n=r(5155),i=r(2115),o=r(7558),a=r(4688),l=r(5355),s=r(6947),c=r(5377),d=r(3264),u=r(2596),m=r(9957),h=r(3031),f=r.n(h);function p(){return(0,n.jsxs)(m.E,{children:[(0,n.jsxs)("div",{className:(0,u.A)(f().point,"point0"),children:[(0,n.jsx)("div",{className:f().label,children:"1"}),(0,n.jsx)("div",{className:f().text,children:"Front and top screen with HUD aggregating terrain and battle informations."})]}),(0,n.jsxs)("div",{className:(0,u.A)(f().point,"point1"),children:[(0,n.jsx)("div",{className:f().label,children:"2"}),(0,n.jsx)("div",{className:f().text,children:"Ventilation with air purifier and detection of environment toxicity."})]}),(0,n.jsxs)("div",{className:(0,u.A)(f().point,"point2"),children:[(0,n.jsx)("div",{className:f().label,children:"3"}),(0,n.jsx)("div",{className:f().text,children:"Cameras supporting night vision and heat vision with automatic adjustment."})]})]})}function x(){let e="/r3f-3d",{scene:t,camera:r}=(0,l.A)(),o=new d.tBo,a=(0,s.c)(["px.jpg","nx.jpg","py.jpg","ny.jpg","pz.jpg","nz.jpg"],{path:"".concat(e,"/assets/textures/environment/0/")});t.background=a,t.environment=a;let u=(0,c.p)("".concat(e,"/assets/models/DamagedHelmet/glTF/DamagedHelmet.gltf"));(0,i.useEffect)(()=>(u.scene.scale.set(2,2,2),u.scene.rotation.y=.5*Math.PI,t.add(u.scene),()=>{t.remove(u.scene)}),[]);let m=[],h={width:window.innerWidth,height:window.innerHeight};return(0,i.useEffect)(()=>{setTimeout(()=>{m=[{position:new d.Pq0(1.55,.3,-.6),element:document.querySelector(".point0")},{position:new d.Pq0(.5,.8,-1.6),element:document.querySelector(".point1")},{position:new d.Pq0(1.6,-1.3,-.7),element:document.querySelector(".point2")}]},1e3)},[]),(0,l.C)(e=>{for(let e of m){let n=e.position.clone();n.project(r),o.setFromCamera(n,r);let i=o.intersectObjects(t.children,!0);0===i.length?e.element.hidden=!1:i[0].distance<e.position.distanceTo(r.position)?e.element.hidden=!0:e.element.hidden=!1;let a=n.x*h.width*.5,l=-n.y*h.height*.5;e.element.style.transform="translateX(".concat(a,"px) translateY(").concat(l,"px)")}}),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(p,{})})}function g(){return(0,n.jsxs)(o.Hl,{className:f().webgl,dpr:[1.5,2],fallback:(0,n.jsx)("div",{children:"Sorry no WebGL supported!"}),children:[(0,n.jsx)(a.N,{enableDamping:!0,dampingFactor:.05}),(0,n.jsx)(i.Suspense,{fallback:null,children:(0,n.jsx)(x,{})})]})}},6947:(e,t,r)=>{"use strict";r.d(t,{c:()=>o}),r(2115);var n=r(3264),i=r(5355);function o(e,{path:t}){let[r]=(0,i.F)(n.ScU,[e],e=>e.setPath(t));return r}o.preload=(e,{path:t})=>i.F.preload(n.ScU,[e],e=>e.setPath(t))},9957:(e,t,r)=>{"use strict";let n,i;r.d(t,{E:()=>y});var o=r(9630),a=r(2115),l=r(2669),s=r(3264),c=r(5355);let d=new s.Pq0,u=new s.Pq0,m=new s.Pq0,h=new s.I9Y;function f(e,t,r){let n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);let i=r.width/2,o=r.height/2;return[n.x*i+i,-(n.y*o)+o]}let p=e=>1e-10>Math.abs(e)?0:e;function x(e,t,r=""){let n="matrix3d(";for(let r=0;16!==r;r++)n+=p(t[r]*e.elements[r])+(15!==r?",":")");return r+n}let g=(n=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>x(e,n)),v=(i=e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1],(e,t)=>x(e,i(t),"translate(-50%,-50%)")),y=a.forwardRef(({children:e,eps:t=.001,style:r,className:n,prepend:i,center:x,fullscreen:y,portal:b,distanceFactor:w,sprite:M=!1,transform:P=!1,occlude:j,onOcclude:_,castShadow:E,receiveShadow:S,material:W,geometry:F,zIndexRange:N=[0x1000037,0],calculatePosition:A=f,as:$="div",wrapperClass:T,pointerEvents:q="auto",...z},k)=>{let{gl:R,camera:H,scene:C,size:I,raycaster:D,events:O,viewport:U}=(0,c.A)(),[L]=a.useState(()=>document.createElement($)),V=a.useRef(null),B=a.useRef(null),Y=a.useRef(0),G=a.useRef([0,0]),J=a.useRef(null),X=a.useRef(null),K=(null==b?void 0:b.current)||O.connected||R.domElement.parentNode,Z=a.useRef(null),Q=a.useRef(!1),ee=a.useMemo(()=>j&&"blending"!==j||Array.isArray(j)&&j.length&&function(e){return e&&"object"==typeof e&&"current"in e}(j[0]),[j]);a.useLayoutEffect(()=>{let e=R.domElement;j&&"blending"===j?(e.style.zIndex=`${Math.floor(N[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)},[j]),a.useLayoutEffect(()=>{if(B.current){let e=V.current=l.createRoot(L);if(C.updateMatrixWorld(),P)L.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{let e=A(B.current,H,I);L.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return K&&(i?K.prepend(L):K.appendChild(L)),()=>{K&&K.removeChild(L),e.unmount()}}},[K,P]),a.useLayoutEffect(()=>{T&&(L.className=T)},[T]);let et=a.useMemo(()=>P?{position:"absolute",top:0,left:0,width:I.width,height:I.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:x?"translate3d(-50%,-50%,0)":"none",...y&&{top:-I.height/2,left:-I.width/2,width:I.width,height:I.height},...r},[r,x,y,I,P]),er=a.useMemo(()=>({position:"absolute",pointerEvents:q}),[q]);a.useLayoutEffect(()=>{var t,i;Q.current=!1,P?null==(t=V.current)||t.render(a.createElement("div",{ref:J,style:et},a.createElement("div",{ref:X,style:er},a.createElement("div",{ref:k,className:n,style:r,children:e})))):null==(i=V.current)||i.render(a.createElement("div",{ref:k,style:et,className:n,children:e}))});let en=a.useRef(!0);(0,c.C)(e=>{if(B.current){H.updateMatrixWorld(),B.current.updateWorldMatrix(!0,!1);let e=P?G.current:A(B.current,H,I);if(P||Math.abs(Y.current-H.zoom)>t||Math.abs(G.current[0]-e[0])>t||Math.abs(G.current[1]-e[1])>t){let t=function(e,t){let r=d.setFromMatrixPosition(e.matrixWorld),n=u.setFromMatrixPosition(t.matrixWorld),i=r.sub(n),o=t.getWorldDirection(m);return i.angleTo(o)>Math.PI/2}(B.current,H),r=!1;ee&&(Array.isArray(j)?r=j.map(e=>e.current):"blending"!==j&&(r=[C]));let n=en.current;r?en.current=function(e,t,r,n){let i=d.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),h.set(o.x,o.y),r.setFromCamera(h,t);let a=r.intersectObjects(n,!0);if(a.length){let e=a[0].distance;return i.distanceTo(r.ray.origin)<e}return!0}(B.current,H,D,r)&&!t:en.current=!t,n!==en.current&&(_?_(!en.current):L.style.display=en.current?"block":"none");let i=Math.floor(N[0]/2),o=j?ee?[N[0],i]:[i-1,0]:N;if(L.style.zIndex=`${function(e,t,r){if(t instanceof s.ubm||t instanceof s.qUd){let n=d.setFromMatrixPosition(e.matrixWorld),i=u.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(i),a=(r[1]-r[0])/(t.far-t.near),l=r[1]-a*t.far;return Math.round(a*o+l)}}(B.current,H,o)}`,P){let[e,t]=[I.width/2,I.height/2],r=H.projectionMatrix.elements[5]*t,{isOrthographicCamera:n,top:i,left:o,bottom:a,right:l}=H,s=g(H.matrixWorldInverse),c=n?`scale(${r})translate(${p(-(l+o)/2)}px,${p((i+a)/2)}px)`:`translateZ(${r}px)`,d=B.current.matrixWorld;M&&((d=H.matrixWorldInverse.clone().transpose().copyPosition(d).scale(B.current.scale)).elements[3]=d.elements[7]=d.elements[11]=0,d.elements[15]=1),L.style.width=I.width+"px",L.style.height=I.height+"px",L.style.perspective=n?"":`${r}px`,J.current&&X.current&&(J.current.style.transform=`${c}${s}translate(${e}px,${t}px)`,X.current.style.transform=v(d,1/((w||10)/400)))}else{let t=void 0===w?1:function(e,t){if(t instanceof s.qUd)return t.zoom;if(!(t instanceof s.ubm))return 1;{let r=d.setFromMatrixPosition(e.matrixWorld),n=u.setFromMatrixPosition(t.matrixWorld);return 1/(2*Math.tan(t.fov*Math.PI/180/2)*r.distanceTo(n))}}(B.current,H)*w;L.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}G.current=e,Y.current=H.zoom}}if(!ee&&Z.current&&!Q.current)if(P){if(J.current){let e=J.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){let{isOrthographicCamera:t}=H;if(t||F)z.scale&&(Array.isArray(z.scale)?z.scale instanceof s.Pq0?Z.current.scale.copy(z.scale.clone().divideScalar(1)):Z.current.scale.set(1/z.scale[0],1/z.scale[1],1/z.scale[2]):Z.current.scale.setScalar(1/z.scale));else{let t=(w||10)/400,r=e.clientWidth*t,n=e.clientHeight*t;Z.current.scale.set(r,n,1)}Q.current=!0}}}else{let t=L.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){let e=1/U.factor,r=t.clientWidth*e,n=t.clientHeight*e;Z.current.scale.set(r,n,1),Q.current=!0}Z.current.lookAt(e.camera.position)}});let ei=a.useMemo(()=>({vertexShader:P?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[P]);return a.createElement("group",(0,o.A)({},z,{ref:B}),j&&!ee&&a.createElement("mesh",{castShadow:E,receiveShadow:S,ref:Z},F||a.createElement("planeGeometry",null),W||a.createElement("shaderMaterial",{side:s.$EB,vertexShader:ei.vertexShader,fragmentShader:ei.fragmentShader})))})}},e=>{var t=t=>e(e.s=t);e.O(0,[9804,1831,9367,8413,3562,4688,6176,5377,8441,1684,7358],()=>t(1066)),_N_E=e.O()}]);