(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{2660:(e,r,n)=>{"use strict";n.d(r,{zo:()=>s});var t=n(2115),o=n(3264),i=n(5355);let a=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function s(e,r){let n=(0,i.A)(e=>e.gl),s=(0,i.F)(o.Tap,a(e)?Object.values(e):e);return(0,t.useLayoutEffect)(()=>{null==r||r(s)},[r]),(0,t.useEffect)(()=>{if("initTexture"in n){let e=[];Array.isArray(s)?e=s:s instanceof o.gPd?e=[s]:a(s)&&(e=Object.values(s)),e.forEach(e=>{e instanceof o.gPd&&n.initTexture(e)})}},[n,s]),(0,t.useMemo)(()=>{if(!a(e))return s;{let r={},n=0;for(let t in e)r[t]=s[n++];return r}},[e,s])}s.preload=e=>i.F.preload(o.Tap,e),s.clear=e=>i.F.clear(o.Tap,e)},8863:(e,r,n)=>{Promise.resolve().then(n.bind(n,8939))},8939:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>m});var t=n(5155),o=n(2115),i=n(7558),a=n(4688),s=n(5355),l=n(5377),u=n(2660),c=n(3264);function v(){let e=(0,o.useRef)(),{scene:r}=(0,s.A)(),n=(0,l.p)("/new/bakedModel.glb"),i=(0,u.zo)("/new/perlin.png");return i.wrapS=c.GJx,i.wrapT=c.GJx,(0,o.useEffect)(()=>{n.scene.getObjectByName("baked").material.map.anisotropy=8,r.add(n.scene)},[]),(0,s.C)((r,n)=>{e.current&&(e.current.uniforms.uTime.value+=n)}),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("mesh",{"position-y":4.83,translate:[0,.5,0],scale:[1.5,6,1.5],children:[(0,t.jsx)("planeGeometry",{args:[1,1,16,64]}),(0,t.jsx)("shaderMaterial",{ref:e,side:2,transparent:!0,depthWrite:!1,vertexShader:"uniform sampler2D uPerlinTexture;\r\nuniform float uTime;\r\n\r\nvarying vec2 vUv;\r\n\r\nvec2 rotate2D(vec2 value, float angle)\r\n{\r\n    float s = sin(angle);\r\n    float c = cos(angle);\r\n    mat2 m = mat2(c, s, -s, c);\r\n    return m * value;\r\n}\r\n\r\nvoid main() {\r\n    vec3 newPosition = position;\r\n\r\n    float twistPerlin = texture(\r\n        uPerlinTexture, \r\n        vec2(0.5, uv.y * 0.2 -  uTime * 0.005)\r\n    ).r;\r\n    float angle = twistPerlin * 10.0;\r\n    newPosition.xz = rotate2D(newPosition.xz, angle);\r\n\r\n    vec2 windOffset = vec2(\r\n        texture(uPerlinTexture, vec2(0.25, uTime * 0.1)).r - 0.5,\r\n        texture(uPerlinTexture, vec2(0.75, uTime * 0.1)).r - 0.5\r\n    );\r\n    windOffset *= pow(uv.y, 3.0) * 10.0;\r\n    newPosition.xz += windOffset;\r\n\r\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(newPosition, 1.0); \r\n\r\n    vUv = uv;\r\n}\r\n",fragmentShader:"uniform sampler2D uPerlinTexture;\r\nuniform float uTime;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n    vec2 smokeUv = vUv;\r\n    smokeUv.x *= 0.5;\r\n    smokeUv.y *= 0.3;\r\n    smokeUv.y -= uTime * 0.03;\r\n\r\n    float smoke = texture(uPerlinTexture, smokeUv).r;\r\n\r\n    smoke = smoothstep(0.4, 1.0, smoke);\r\n\r\n    smoke *= smoothstep(0.0, 0.1, vUv.x);\r\n    smoke *= smoothstep(1.0, 0.9, vUv.x);\r\n    smoke *= smoothstep(0.0, 0.1, vUv.y);\r\n    smoke *= smoothstep(1.0, 0.4, vUv.y);\r\n\r\n    gl_FragColor = vec4(0.6, 0.3, 0.2, smoke);\r\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\r\n    #include <tonemapping_fragment>\r\n    #include <colorspace_fragment>\r\n\r\n}\r\n",uniforms:{uTime:{value:0},uPerlinTexture:{value:i}}})]})})}function m(){return(0,t.jsxs)(i.Hl,{dpr:[1.5,2],fallback:(0,t.jsx)("div",{children:"Sorry no WebGL supported!"}),children:[(0,t.jsx)(a.N,{enableDamping:!0,dampingFactor:.05}),(0,t.jsx)(o.Suspense,{fallback:null,children:(0,t.jsx)(v,{})})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[1831,9367,8413,3562,4688,6176,5377,8441,1684,7358],()=>r(8863)),_N_E=e.O()}]);