(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1892],{1498:function(e){var t;(t=function(){function e(e){return n.appendChild(e.dom),e}function r(e){for(var t=0;t<n.children.length;t++)n.children[t].style.display=t===e?"block":"none";a=e}var a=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",function(e){e.preventDefault(),r(++a%n.children.length)},!1);var o=(performance||Date).now(),s=o,i=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return r(0),{REVISION:16,dom:n,addPanel:e,showPanel:r,begin:function(){o=(performance||Date).now()},end:function(){i++;var e=(performance||Date).now();if(c.update(e-o,200),e>s+1e3&&(l.update(1e3*i/(e-s),100),s=e,i=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:n,setMode:r}}).Panel=function(e,t,r){var a=1/0,n=0,o=Math.round,s=o(window.devicePixelRatio||1),i=80*s,l=48*s,c=3*s,u=2*s,d=3*s,h=15*s,p=74*s,f=30*s,m=document.createElement("canvas");m.width=i,m.height=l,m.style.cssText="width:80px;height:48px";var x=m.getContext("2d");return x.font="bold "+9*s+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=r,x.fillRect(0,0,i,l),x.fillStyle=t,x.fillText(e,c,u),x.fillRect(d,h,p,f),x.fillStyle=r,x.globalAlpha=.9,x.fillRect(d,h,p,f),{dom:m,update:function(l,g){a=Math.min(a,l),n=Math.max(n,l),x.fillStyle=r,x.globalAlpha=1,x.fillRect(0,0,i,h),x.fillStyle=t,x.fillText(o(l)+" "+e+" ("+o(a)+"-"+o(n)+")",c,u),x.drawImage(m,d+s,h,p-s,f,d,h,p-s,f),x.fillRect(d+p-s,h,s,f),x.fillStyle=r,x.globalAlpha=.9,x.fillRect(d+p-s,h,s,o((1-l/g)*f))}}},e.exports=t},2261:(e,t,r)=>{"use strict";r.d(t,{M:()=>s});var a=r(2115),n=function(e){function t(t){var r;return(r=e.call(this,t)||this).state={hasError:!1,error:null},r}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e,t.getDerivedStateFromError=function(e){return{hasError:!0,error:e}};var r=t.prototype;return r.componentDidCatch=function(e,t){return this.props.onDidCatch(e,t)},r.render=function(){var e=this.state,t=this.props,r=t.render,a=t.children,n=t.renderError;return e.hasError?n?n({error:e.error}):null:r?r():a||null},t}(a.PureComponent),o=function(e,t){switch(t.type){case"catch":return{didCatch:!0,error:t.error};case"reset":return{didCatch:!1,error:null};default:return e}};function s(e){var t=(0,a.useReducer)(o,{didCatch:!1,error:null}),r=t[0],s=t[1],i=(0,a.useRef)(null);function l(){var t;return t=function(t,r){s({type:"catch",error:t}),e&&e.onDidCatch&&e.onDidCatch(t,r)},function(e){return a.createElement(n,{onDidCatch:t,children:e.children,render:e.render,renderError:e.renderError})}}var c,u=(0,a.useCallback)(function(){i.current=l(),s({type:"reset"})},[]);return{ErrorBoundary:null!==(c=i.current)?c:(i.current=l(),i.current),didCatch:r.didCatch,error:r.error,reset:u}}},2660:(e,t,r)=>{"use strict";r.d(t,{zo:()=>i});var a=r(2115),n=r(3264),o=r(5355);let s=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function i(e,t){let r=(0,o.A)(e=>e.gl),i=(0,o.F)(n.Tap,s(e)?Object.values(e):e);return(0,a.useLayoutEffect)(()=>{null==t||t(i)},[t]),(0,a.useEffect)(()=>{if("initTexture"in r){let e=[];Array.isArray(i)?e=i:i instanceof n.gPd?e=[i]:s(i)&&(e=Object.values(i)),e.forEach(e=>{e instanceof n.gPd&&r.initTexture(e)})}},[r,i]),(0,a.useMemo)(()=>{if(!s(e))return i;{let t={},r=0;for(let a in e)t[a]=i[r++];return t}},[e,i])}i.preload=e=>o.F.preload(n.Tap,e),i.clear=e=>o.F.clear(n.Tap,e)},2878:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),n=r(2115),o=r(2261),s=r(5355),i=r(7558),l=r(1498),c=r.n(l);function u(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}function d({showPanel:e=0,className:t,parent:r}){let a=function(e,t=[],r){let[a,o]=n.useState();return n.useLayoutEffect(()=>{let t=e();return o(t),u(void 0,t),()=>u(void 0,null)},t),a}(()=>new(c()),[]);return n.useEffect(()=>{if(a){let n=r&&r.current||document.body;a.showPanel(e),null==n||n.appendChild(a.dom);let o=(null!=t?t:"").split(" ").filter(e=>e);o.length&&a.dom.classList.add(...o);let i=(0,s.j)(()=>a.begin()),l=(0,s.k)(()=>a.end());return()=>{o.length&&a.dom.classList.remove(...o),null==n||n.removeChild(a.dom),i(),l()}}},[r,a,t,e]),null}var h=r(4688),p=r(2072),f=r(3264),m=r(2660);let x=function(){let e=(0,n.useRef)(),{floorColorTexture:t,floorAmbientOcclusionTexture:r,floorNormalTexture:o,floorRoughnessTexture:s}=(0,m.zo)({floorColorTexture:"/textures/floor/color.jpg",floorAmbientOcclusionTexture:"/textures/floor/ambientOcclusion.jpg",floorNormalTexture:"/textures/floor/normal.jpg",floorRoughnessTexture:"/textures/floor/roughness.jpg"});return(0,n.useLayoutEffect)(()=>{t.repeat.set(8,8),r.repeat.set(8,8),o.repeat.set(8,8),s.repeat.set(8,8),t.wrapS=f.GJx,r.wrapS=f.GJx,o.wrapS=f.GJx,s.wrapS=f.GJx,t.wrapT=f.GJx,r.wrapT=f.GJx,o.wrapT=f.GJx,s.wrapT=f.GJx},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("mesh",{"rotation-x":-Math.PI/2,"position-y":0,ref:e,receiveShadow:!0,children:[(0,a.jsx)("planeGeometry",{args:[200,200]}),(0,a.jsx)("meshStandardMaterial",{color:"#a9c388",map:t,aoMap:r,normalMap:o,roughnessMap:s})]})})};function g(){let e=(0,n.useRef)(),t=(0,n.useRef)(),{inten:r,distance:o}=(0,p._5)("doors",{inten:{value:2,min:0,max:10,step:.1},distance:{value:4,min:0,max:10,step:.1}}),{doorColorTexture:s,doorAlphaTexture:i,doorAmbientOcclusionTexture:l,doorHeightTexture:c,doorNormalTexture:u,doorMetalnessTexture:d,doorRoughnessTexture:h}=(0,m.zo)({doorColorTexture:"/textures/door/color.jpg",doorAlphaTexture:"/textures/door/opacity.jpg",doorAmbientOcclusionTexture:"/textures/door/ambientOcclusion.jpg",doorHeightTexture:"/textures/door/height.png",doorNormalTexture:"/textures/door/normal.jpg",doorMetalnessTexture:"/textures/door/metallic.jpg",doorRoughnessTexture:"/textures/door/roughness.jpg"}),{bricksColorTexture:f,bricksAmbientOcclusionTexture:x,bricksNormalTexture:g,bricksRoughnessTexture:j}=(0,m.zo)({bricksColorTexture:"/textures/walls/color.jpg",bricksAmbientOcclusionTexture:"/textures/walls/ambientOcclusion.jpg",bricksNormalTexture:"/textures/walls/normal.jpg",bricksRoughnessTexture:"/textures/walls/roughness.jpg"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("pointLight",{castShadow:!0,position:[0,2.2,2.7],args:["#ff7d46",r,o],"shadow-cameraFar":7,"shadow-mapSize":[256,256]}),(0,a.jsxs)("mesh",{"position-y":3.5,"rotation-y":Math.PI/4,children:[(0,a.jsx)("coneGeometry",{args:[3.5,2,4]}),(0,a.jsx)("meshStandardMaterial",{color:"#b35f45"})]}),(0,a.jsxs)("mesh",{ref:t,"position-y":1.35,castShadow:!0,children:[(0,a.jsx)("boxGeometry",{args:[4,2.5,4]}),(0,a.jsx)("meshStandardMaterial",{color:"#ac8e82",map:f,aoMap:x,normalMap:g,roughnessMap:j})]}),(0,a.jsxs)("mesh",{ref:e,position:[0,1,2.01],children:[(0,a.jsx)("planeGeometry",{args:[1.6,2,100,100]}),(0,a.jsx)("meshStandardMaterial",{transparent:!0,map:s,alphaMap:i,aoMap:l,displacementMap:c,displacementScale:.1,normalMap:u,metalnessMap:d,roughnessMap:h})]})]})}function j(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("mesh",{position:[.8,.2,2.2],scale:[.5,.5,.5],castShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[1,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:"#89c854"})]}),(0,a.jsxs)("mesh",{position:[1.4,0,2],scale:[.25,.25,.25],castShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[1,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:"#89c854"})]}),(0,a.jsxs)("mesh",{position:[-.8,.2,2.2],scale:[.4,.4,.4],castShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[1,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:"#89c854"})]}),(0,a.jsxs)("mesh",{position:[-1.1,0,2.6],scale:[.15,.15,.15],castShadow:!0,children:[(0,a.jsx)("sphereGeometry",{args:[1,16,16]}),(0,a.jsx)("meshStandardMaterial",{color:"#89c854"})]})]})}let w=function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("group",{children:[(0,a.jsx)(g,{}),(0,a.jsx)(j,{})]})})};function y(){let e=(0,n.useRef)();return(0,n.useLayoutEffect)(()=>{let t=new f.iNn(.6,.8,.2),r=new f._4j({color:"#b2b6b1"});for(let a=0;a<200;a++){let a=Math.random()*Math.PI*2,n=4+50*Math.random(),o=Math.sin(a),s=Math.cos(a),i=new f.eaF(t,r);i.position.set(o*n,.3,s*n),i.rotation.y=(Math.random()-.5)*.4,i.rotation.z=(Math.random()-.5)*.4,i.castShadow=!0,e.current.add(i)}},[]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("group",{ref:e})})}let M=function(){return(0,n.useLayoutEffect)(()=>{},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("fog",{attach:"fog",args:["#262837",6,20]}),(0,a.jsx)("color",{attach:"background",args:["#262837"]})]})},S=function(){let e=(0,n.useRef)(),t=(0,n.useRef)(),r=(0,n.useRef)();return(0,s.C)(a=>{let n=a.clock.getElapsedTime(),o=.5*n,s=4*Math.cos(o),i=4*Math.sin(o),l=Math.sin(3*n);e.current.position.set(s,l,i);let c=-(.32*n),u=5*Math.cos(c),d=5*Math.sin(c),h=Math.sin(4*n)*Math.sin(2.5*n);t.current.position.set(u,h,d);let p=-(.18*n),f=Math.cos(p)*(7+Math.sin(.32*n)),m=Math.sin(p)*(7+Math.sin(.5*n)),x=Math.sin(4*n)*Math.sin(2.5*n);r.current.position.set(f,x,m)}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("pointLight",{castShadow:!0,ref:e,color:"#ff00ff",intensity:2,distance:3,"shadow-cameraFar":7,"shadow-mapSize":[256,256]}),(0,a.jsx)("pointLight",{castShadow:!0,ref:t,color:"#00ffff",intensity:2,distance:3,"shadow-cameraFar":7,"shadow-mapSize":[256,256]}),(0,a.jsx)("pointLight",{castShadow:!0,ref:r,color:"#ffff00",intensity:2,distance:3,"shadow-cameraFar":7,"shadow-mapSize":[256,256]})]})};function v(){let{ErrorBoundary:e,didCatch:t,error:r}=(0,o.M)(),{ambient:s,directional:l,x:c,y:u,z:f}=(0,p._5)({环境光:(0,p.TV)({ambient:{value:.2,min:0,max:1,step:.1}}),平行光:(0,p.TV)({directional:{value:.5,min:0,max:1,step:.1},x:{value:4,min:-5,max:5,step:.1},y:{value:5,min:-5,max:5,step:.1},z:{value:-2,min:-5,max:5,step:.1}})});return t?(0,a.jsx)("div",{children:r.message}):(0,a.jsx)(e,{children:(0,a.jsxs)(i.Hl,{shadows:!0,dpr:[1,2],camera:{position:[0,5,15]},gl:{logarithmicDepthBuffer:!0},children:[(0,a.jsx)(d,{}),(0,a.jsx)(h.N,{maxPolarAngle:.49*Math.PI,minDistance:5,maxDistance:20,makeDefault:!0}),(0,a.jsx)("ambientLight",{color:"#b9d5ff",intensity:s}),(0,a.jsx)("directionalLight",{color:"#b9d5ff",intensity:l,position:[c,u,f],castShadow:!0}),(0,a.jsxs)(n.Suspense,{fallback:null,children:[(0,a.jsx)(M,{}),(0,a.jsx)(x,{}),(0,a.jsx)(w,{}),(0,a.jsx)(y,{}),(0,a.jsx)(S,{})]})]})})}(0,s.e)({AxesHelper:f.IzY})},3112:(e,t,r)=>{Promise.resolve().then(r.bind(r,2878))}},e=>{var t=t=>e(e.s=t);e.O(0,[1831,9367,8413,3562,4688,2072,8441,1684,7358],()=>t(3112)),_N_E=e.O()}]);